@(pageInfo: model.PageInfo)(implicit token: play.filters.csrf.CSRF.Token)

@import helper._
@import model.Benefits
@import com.gu.membership.salesforce.Tier
@import org.joda.time.DateTime
@import com.github.nscala_time.time.Imports._

@* //TODO remove this and relevant imports on 31/3/2015 *@
@foundingMember = @{
    if(DateTime.now < new DateTime(2015, 3, 31, 0, 0).withZone(DateTimeZone.UTC)) {
        Some("Join before March 31st to become a Founding Member and the price you pay will not rise.")
    } else {
        None
    }
}

@main("Join", pageInfo=pageInfo) {

    <main role="main" class="page-content l-constrained">
        @fragments.page.pageHeader("Become a member", foundingMember)

        <section class="page-section">
             <div class="page-section__content">
                <ul class="grid grid--bordered grid--3up-stacked">
                    <li class="grid__item">
                        @fragments.tier.packagePromo(Tier.Friend, Some("#package-benefits-friend"))
                    </li>
                    <li class="grid__item">
                        @fragments.tier.packagePromo(Tier.Partner, Some("#package-benefits-partner"))
                    </li>
                    <li class="grid__item">
                        @fragments.tier.packagePromo(Tier.Patron, Some("#package-benefits-patron"))
                    </li>
                </ul>
            </div>
        </section>

        <section class="page-section">
            <div class="page-section__content">
                <h3 class="h-section">What's included</h3>
                <div id="package-benefits-friend">
                    @fragments.tier.packageStack(Tier.Friend)
                </div>
                <div id="package-benefits-partner">
                    @fragments.tier.packageStack(Tier.Partner)
                </div>
                <div id="package-benefits-patron">
                    @fragments.tier.packageStack(Tier.Patron)
                </div>
            </div>
        </section>

        @fragments.analytics.membershipTracking()
        @fragments.analytics.videoCampaignPHD.joinPage()

    </main>

}
