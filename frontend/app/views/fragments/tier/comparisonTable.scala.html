@()

@import com.gu.membership.salesforce.Tier
@import com.gu.membership.salesforce.Tier.{Partner, Supporter}
@import model.Benefits
@import model.Benefits.BenefitItem

@comparisonHeader(tier: Tier) = {
    <th class="comparison-table__header">
        <div class="comparison-table__header__name tone-border-@tier.name.toLowerCase">
        @fragments.tier.tierTrail(tier, showCaption = false)
        </div>
    </th>
}

@comparisonDetails(benefits: Seq[BenefitItem]) = {
    <td class="comparison-table__description">
        <div class="comparison-table__description__inner">
            <ul class="o-bulleted-list">
            @for(benefit <- benefits) {
                <li>
                    @if(benefit.isNew) {
                        @fragments.inlineIcon("new-arrow", List("icon-inline--badge", "icon-inline--brand"))
                    }
                    @benefit.title
                </li>
            }
            </ul>
        </div>
    </td>
}

@comparisonCheckmark(checkmark: Boolean) = {
    <td class="comparison-table__tier">
        <div class="comparison-table__tier__inner">
        @fragments.common.checkmark(checkmark)
        </div>
    </td>
}

@comparisonPricing(tier: Tier) = {
    <td class="comparison-table__trail">
        <div class="comparison-table__trail__inner">
            <div class="comparison-table__trail__pricing">
                @fragments.pricing.priceInfo(tier, canFlex=false)
            </div>
            <div class="comparison-table__trail__action">
                <a class="action action--snap u-no-bottom-margin qa-comparison-@tier.toString.toLowerCase"
                   href="@routes.Joiner.enterDetails(tier)"
                   data-metric-trigger="click"
                   data-metric-category="join"
                   data-metric-action="@tier.toString.toLowerCase"
                >
                    <span class="action__label">
                        Become a @tier
                    </span>
                </a>
            </div>
        </div>
    </td>
}
<div class="comparison-table">
    <table>
        <thead>
            <tr>
                <th class="u-h">Description</th>
                @comparisonHeader(Supporter)
                @comparisonHeader(Partner)
            </tr>
        </thead>
        <tbody class="comparison-table__body">

            <tr class="comparison-table__row">
                @comparisonDetails(Benefits.comparisonBasicList)
                @comparisonCheckmark(checkmark = true)
                @comparisonCheckmark(checkmark = true)
            </tr>

            <tr class="comparison-table__row">
                @comparisonDetails(Benefits.comparisonHiglightsList)
                @comparisonCheckmark(checkmark = false)
                @comparisonCheckmark(checkmark = true)
            </tr>

        </tbody>
        <tfoot class="comparison-table__footer">
            <tr>
                <td>&nbsp;</td>
                @comparisonPricing(Supporter)
                @comparisonPricing(Partner)
            </tr>
        </tfoot>
    </table>
    <div class="comparison-table__extra">
        @fragments.tier.friendTeaser()
    </div>
</div>
