@(pageInfo: model.PageInfo)

@import configuration.Config
@import views.support.Asset

<header class="header hidden-print js-header" role="banner">
    <div class="header__inner">
        <div class="header__branding l-constrained">
            <div class="header__primary">
                <ul class="nav nav-control u-cf" role="menubar">
                    <li class="nav-control__item">
                        <a href="@pageInfo.customSignInUrl.getOrElse(Config.idWebAppSigninUrl(""))"
                           class="control no-underline js-identity-menu-toggle@if(pageInfo.customSignInUrl.isEmpty){ js-identity-menu-url}"
                           id="qa-identity-control"
                           title="Your account"
                           role="menuitem"
                        >
                            <span class="control__item">
                                <span class="control__icon icon-holder icon-holder--large icon-holder--neutral">
                                    @fragments.inlineIcon("user")
                                </span>
                            </span>
                            <span class="control__item hidden-mobile js-user-detail">
                                <span class="control__info">
                                    <span class="case--lower js-user-displayname">Sign in</span>
                                    <span class="u-h u-parentheses js-user-tier"></span>
                                </span>
                            </span>
                        </a>

                        @* Identity / Account pop-up *@
                        <nav role="navigation" class="nav-popup is-hidden js-identity-menu" aria-label="Profile menu">
                            <ul class="nav-popup__list">
                                <li class="nav-popup__item">
                                    <a href="@Config.idWebAppUrl/user/id/" class="nav-popup__link js-identity-menu-comment-activity">Comment activity</a>
                                </li>
                                <li class="nav-popup__item">
                                    <a class="nav-popup__link js-identity-menu-edit-profile"
                                       id="qa-identity-nav-edit"
                                       href="@Config.idWebAppUrl/public/edit"
                                       data-member-href="@Config.idWebAppUrl/membership/edit">Edit profile</a>
                                </li>
                                <li class="nav-popup__item">
                                    <a href="@Config.idWebAppUrl/email-prefs" class="nav-popup__link">Email preferences</a>
                                </li>
                                <li class="nav-popup__item">
                                    <a href="@Config.idWebAppUrl/password/change" class="nav-popup__link">Change password</a>
                                </li>
                                <li class="nav-popup__item">
                                    <a href="@Config.idWebAppUrl/signout" class="nav-popup__link">Sign out</a>
                                </li>
                            </ul>
                        </nav>

                    </li>
                    <li class="nav-control__item nav-control__item--last is-hidden js-header-join-us-cta">
                        <a href="@routes.Joiner.tierList" role="menuitem" class="control no-underline hidden-mobile" title="Join us">
                            <span class="control__item">
                                @fragments.inlineIcon("g-mark", List("icon-inline--large"))
                            </span>
                            <span class="control__item">
                                <span class="control__info no-underline--override case--lower hidden-mobile">Join us</span>
                            </span>
                        </a>
                    </li>
                </ul>
            </div>

            @* External navigation *@
            <div class="header__secondary">
                <ul class="nav nav--external nav--brand hidden-tablet">
                    <li><a href="http://www.theguardian.com/" class="nav__link case--lower">The Guardian</a></li>
                    <li><a href="http://jobs.theguardian.com/" class="nav__link case--lower">Jobs</a></li>
                    <li><a href="https://soulmates.theguardian.com/" class="nav__link case--lower">Soulmates</a></li>
                </ul>
            </div>

            @* Branding *@
            <div class="header__logo">
                <a href="/" class="header__logo__link" id="qa-header-logo">
                    <span class="u-h">@Config.siteTitle</span>
                    <img src="@Asset.at("images/logos/membership-logo.svg")" alt="@Config.siteTitle" class="header__logo__image hidden-mobile">
                    <img src="@Asset.at("images/logos/membership-logo-small.svg")" alt="@Config.siteTitle" class="header__logo__image mobile-only">
                </a>
            </div>

        </div>
        <button role="menuitem" class="mobile-menu mobile-only js-menu-icon" title="Menu">
            <span class="mobile-menu__icon">
                <i></i>
                <i></i>
                <i></i>
            </span>
        </button>
        @fragments.nav(pageInfo)
    </div>
</header>
