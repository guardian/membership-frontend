/*! lazysizes - v1.0.1 -  Licensed MIT */
!function(a,b){"use strict";function c(){this.ratioElems=b.getElementsByClassName("lazyaspectratio"),this._setupEvents(),this.processImages()}var d,e,f=/^picture$/i,g="data-aspectratio",h="img["+g+"]",i=function(b){return a.matchMedia?(i=function(a){return!a||(matchMedia(a)||{}).matches})(b):a.Modernizr&&Modernizr.mq?!b||Modernizr.mq(b):!b};c.prototype={_setupEvents:function(){var a=this,c=function(b){b.naturalWidth<50?a.addAspectRatio(b,!0):a.removeAspectRatio(b,!0)},d=function(){a.processImages()};b.addEventListener("load",function(a){a.target.getAttribute&&a.target.getAttribute(g)&&c(a.target)},!0),addEventListener("resize",function(){var b,d=function(){var b,d;for(b=0,d=a.ratioElems.length;d>b;b++)c(a.ratioElems[b])};return function(){clearTimeout(b),b=setTimeout(d,33)}}()),b.addEventListener("DOMContentLoaded",d),addEventListener("load",d)},processImages:function(a){var c,d;a||(a=b),c="length"in a&&!a.nodeName?a:a.querySelectorAll(h);for(d=0;d<c.length;d++)c[d].naturalWidth>50?this.removeAspectRatio(c[d]):this.addAspectRatio(c[d])},getSelectedRatio:function(a){var b,c,d,e,h,j=a.parentNode;if(j&&f.test(j.nodeName||""))for(d=j.getElementsByTagName("source"),b=0,c=d.length;c>b;b++)if(e=d[b].getAttribute("data-media")||d[b].getAttribute("media"),lazySizesConfig.customMedia[e]&&(e=lazySizesConfig.customMedia[e]),i(e)){h=d[b].getAttribute(g);break}return h||a.getAttribute(g)||""},parseRatio:function(){var a=/^\s*([+\d\.]+)(\s*[\/x]\s*([+\d\.]+))?\s*$/,b={};return function(c){return!b[c]&&c.match(a)&&(b[c]=RegExp.$3?RegExp.$1/RegExp.$3:1*RegExp.$1),b[c]}}(),addAspectRatio:function(a,b){var c,d=a.offsetWidth;b||lazySizes.aC(a,"lazyaspectratio"),d&&(c=this.getSelectedRatio(a),c=this.parseRatio(c),c&&(a.style.height=d/c+"px"))},removeAspectRatio:function(a){lazySizes.rC(a,"lazyaspectratio"),a.style.height="",a.removeAttribute(g)}},e=function(){var b=a.jQuery||a.Zepto||a.shoestring||a.$;b&&b.fn&&!b.fn.imageRatio&&b.fn.filter&&b.fn.add&&b.fn.find&&(b.fn.imageRatio=function(){return d.processImages(this.find(h).add(this.filter(h))),this})},e(),setTimeout(e),d=new c,a.imageRatio=d,"object"==typeof module&&module.exports?module.exports=d:"function"==typeof define&&define.amd&&define(d)}(window,document);